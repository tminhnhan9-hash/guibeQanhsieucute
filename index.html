<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>g·ª≠i b√©Qanhcute</title>
  <style>
    :root{
      --bg-black:#040308;
      --pink-1:#ff7bbd;
      --pink-2:#ff4da6;
      --glow: 0 0 30px rgba(255,77,166,0.18);
      --text-shadow: 0 2px 18px rgba(255,77,166,0.25);
    }
    html,body{
      height:100%;
      margin:0;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,77,166,0.06), transparent 8%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(255,123,189,0.04), transparent 10%),
                  var(--bg-black);
      color:#fff;
      overflow:hidden;
    }

    /* Stars */
    .starfield{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
    }
    .star{
      position:absolute;
      width:2px;height:2px;
      background:linear-gradient(180deg,#fff, #ffd6ea);
      border-radius:50%;
      opacity:0.9;
      filter: blur(0.3px);
      animation: twinkle 3s infinite ease-in-out;
    }
    @keyframes twinkle{
      0%{opacity:0.1; transform:scale(0.6)}
      50%{opacity:1; transform:scale(1.2)}
      100%{opacity:0.2; transform:scale(0.8)}
    }

    /* Center card */
    .card {
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(92vw,740px);
      max-width:740px;
      padding:24px;
      border-radius:18px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6), var(--glow);
      background: linear-gradient(180deg, rgba(255,77,166,0.06), rgba(0,0,0,0.2));
      text-align:center;
      z-index:2;
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }

    /* Title typing */
    .title {
      font-size:clamp(20px,6.5vw,42px);
      line-height:1.05;
      font-weight:700;
      color:var(--pink-1);
      margin:12px 0 6px;
      text-shadow: var(--text-shadow);
      min-height: calc(1.2em * 2.2);
    }
    .sub {
      font-size:clamp(14px,3.2vw,20px);
      color:#ffdff0;
      opacity:0.95;
      margin-bottom:16px;
    }

    /* Heart & cat area */
    .scene {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:18px;
      margin-top:6px;
    }

    .heart {
      width:120px; height:120px;
      transform-origin:center;
      animation: floaty 3.8s ease-in-out infinite;
      filter: drop-shadow(0 10px 20px rgba(255,77,166,0.18));
    }
    @keyframes floaty{
      0%{transform:translateY(0) scale(1)}
      50%{transform:translateY(-12px) scale(1.06)}
      100%{transform:translateY(0) scale(1)}
    }

    /* Cats flying around */
    .cat {
      width:92px; height:92px;
      will-change:transform,opacity;
      animation: orbit 10s linear infinite;
      transform-origin: center;
    }
    .cat.right { animation-direction:reverse; }
    @keyframes orbit{
      0%{transform: rotate(0deg) translateX(0px) translateY(0px) scale(1); opacity:1}
      25%{transform: rotate(60deg) translateX(40px) translateY(-30px) scale(0.95); opacity:0.9}
      50%{transform: rotate(120deg) translateX(-30px) translateY(-60px) scale(1.02); opacity:0.98}
      75%{transform: rotate(180deg) translateX(-40px) translateY(20px) scale(0.96); opacity:0.9}
      100%{transform: rotate(240deg) translateX(0px) translateY(0px) scale(1); opacity:1}
    }

    /* Buttons and controls */
    .controls {
      margin-top:18px;
      display:flex;
      gap:12px;
      justify-content:center;
      align-items:center;
    }
    .btn {
      background:linear-gradient(180deg,var(--pink-2),var(--pink-1));
      color:white;
      padding:10px 16px;
      border-radius:999px;
      border:none;
      font-weight:600;
      box-shadow: 0 8px 18px rgba(255,77,166,0.14);
      cursor:pointer;
    }
    .btn:active{ transform:translateY(1px) }

    /* small play button */
    .player {
      position:fixed;
      left:14px; bottom:14px;
      z-index:5;
      display:flex;
      gap:8px;
      align-items:center;
      background:rgba(2,2,6,0.45);
      padding:8px 10px;
      border-radius:999px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
    }
    .player button{ all:unset; cursor:pointer; color:#fff; font-weight:700; padding:6px; border-radius:8px; background:transparent }
    .player .label{ font-size:13px; opacity:0.95; padding-right:6px; }

    /* typing cursor */
    .typing {
      display:inline-block;
      border-right:2px solid rgba(255,255,255,0.9);
      padding-right:4px;
      margin-left:2px;
      animation: blink 1s steps(2) infinite;
    }
    @keyframes blink{
      0%{opacity:1}
      50%{opacity:0}
      100%{opacity:1}
    }

    /* rotate effect */
    .rotate-out {
      display:inline-block;
      animation: rotateOut 800ms ease forwards;
      transform-origin:center;
    }
    @keyframes rotateOut{
      0%{ transform: rotate(0deg) scale(1); opacity:1 }
      60%{ transform: rotate(360deg) scale(1.08); opacity:1 }
      100%{ transform: rotate(360deg) scale(1); opacity:0 }
    }
    .rotate-in {
      display:inline-block;
      animation: rotateIn 800ms ease forwards;
      transform-origin:center;
      opacity:0;
    }
    @keyframes rotateIn{
      0%{ transform: rotate(-90deg) scale(0.6); opacity:0 }
      60%{ transform: rotate(10deg) scale(1.06); opacity:1 }
      100%{ transform: rotate(0deg) scale(1); opacity:1 }
    }

    /* responsive tweaks */
    @media (max-width:420px){
      .heart{ width:92px; height:92px }
      .cat{ width:70px; height:70px }
      .title{ font-size:20px }
    }
  </style>
</head>
<body>

  <!-- starfield container -->
  <div class="starfield" id="stars"></div>

  <div class="card" role="main" aria-label="G·ª≠i b√© Qanhcute">
    <div class="title" id="typedTitle" aria-live="polite"></div>
    <div class="sub">M·ªü nh·∫°c l√™n nha b√© üíñ ‚Äî Anh g·ª≠i m√≥n qu√† nh·ªè n√†y cho Qu·ª≥nh Anh</div>

    <div class="scene" aria-hidden="false">
      <!-- left cat (SVG chibi hugging) -->
      <svg class="cat left" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- simple cute cat hugging a heart -->
        <defs>
          <linearGradient id="g1" x1="0" x2="1">
            <stop offset="0" stop-color="#ffd6ea"/>
            <stop offset="1" stop-color="#ff7bbd"/>
          </linearGradient>
        </defs>
        <g transform="translate(8,8)">
          <ellipse cx="20" cy="78" rx="14" ry="6" fill="rgba(0,0,0,0.06)"/>
          <!-- body -->
          <path d="M18 24c-8 0-14 8-14 18 0 10 6 20 14 20s14-10 14-20c0-10-6-18-14-18z" fill="#ffebe7"/>
          <!-- head -->
          <circle cx="18" cy="12" r="12" fill="#ffdede"/>
          <!-- eyes -->
          <ellipse cx="14" cy="12" rx="2" ry="3" fill="#2b2b2b"/>
          <ellipse cx="22" cy="12" rx="2" ry="3" fill="#2b2b2b"/>
          <!-- blush -->
          <circle cx="10" cy="16" r="2.6" fill="#ffc4d6" opacity="0.9"/>
          <circle cx="26" cy="16" r="2.6" fill="#ffc4d6" opacity="0.9"/>
          <!-- paws hugging heart -->
          <path d="M10 28c6 6 22 6 28 0" fill="none" stroke="#ffdede" stroke-linecap="round" stroke-width="3"/>
          <!-- heart (small) -->
          <g transform="translate(6,22) scale(0.9)">
            <path d="M18 6c-3-6-12-6-12 2 0 7 12 14 12 14s12-6 12-13c0-7-9-7-12-3z" fill="url(#g1)"/>
          </g>
        </g>
      </svg>

      <!-- center big heart -->
      <svg class="heart" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <radialGradient id="hgrad" cx="50%" cy="30%">
            <stop offset="0%" stop-color="#fff" stop-opacity="0.9"/>
            <stop offset="30%" stop-color="#ff92c6" stop-opacity="1"/>
            <stop offset="100%" stop-color="#ff4da6" stop-opacity="1"/>
          </radialGradient>
        </defs>
        <g transform="translate(40,30)">
          <path d="M60 18c-9-18-36-18-45 0-12 24 45 64 45 64s57-40 45-64c-9-18-36-18-45 0z"
                fill="url(#hgrad)" stroke="#ff4da6" stroke-width="1.5"/>
        </g>
      </svg>

      <!-- right cat -->
      <svg class="cat right" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <g transform="translate(8,8)">
          <ellipse cx="82" cy="78" rx="14" ry="6" fill="rgba(0,0,0,0.06)"/>
          <path d="M82 24c8 0 14 8 14 18 0 10-6 20-14 20s-14-10-14-20c0-10 6-18 14-18z" fill="#fff0f2"/>
          <circle cx="82" cy="12" r="12" fill="#ffdede"/>
          <ellipse cx="78" cy="12" rx="2" ry="3" fill="#2b2b2b"/>
          <ellipse cx="86" cy="12" rx="2" ry="3" fill="#2b2b2b"/>
          <circle cx="74" cy="16" r="2.6" fill="#ffc4d6" opacity="0.9"/>
          <circle cx="90" cy="16" r="2.6" fill="#ffc4d6" opacity="0.9"/>
          <path d="M70 28c-6 6-22 6-28 0" fill="none" stroke="#ffdede" stroke-linecap="round" stroke-width="3"/>
          <g transform="translate(54,22) scale(0.9)">
            <path d="M18 6c-3-6-12-6-12 2 0 7 12 14 12 14s12-6 12-13c0-7-9-7-12-3z" fill="#ff7bbd"/>
          </g>
        </g>
      </svg>
    </div>

    <div class="controls" role="group" aria-label="controls">
      <button class="btn" id="replayBtn" title="Play animation again">G·ª≠i l·∫°i n√® üíå</button>
      <button class="btn" id="shareTip" title="H∆∞·ªõng d·∫´n share">H∆∞·ªõng d·∫´n g·ª≠i</button>
    </div>
  </div>

  <!-- audio player small control -->
  <div class="player" id="player">
    <div class="label">Nh·∫°c</div>
    <button id="playBtn">‚ñ∂</button>
    <button id="muteBtn">üîà</button>
  </div>

  <!-- audio element (replace src with your chosen mp3 url if needed) -->
  <audio id="bgAudio" loop preload="auto">
    <!-- Default: small gentle piano (user can replace with their own URL) -->
    <source src="https://cdn.pixabay.com/download/audio/2021/12/15/audio_b7b1fc3d7b.mp3?filename=calm-piano-11087.mp3" type="audio/mpeg">
    <!-- If browser blocks autoplay, user will need to press Play -->
  </audio>

  <script>
    /* ---------- STARFIELD ---------- */
    (function genStars(){
      const container = document.getElementById('stars');
      const w = window.innerWidth, h = window.innerHeight;
      const count = Math.max(40, Math.floor((w*h)/50000));
      for(let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className='star';
        const x = Math.random()*100;
        const y = Math.random()*100;
        const size = (Math.random()*1.8) + 0.7;
        s.style.left = x + 'vw';
        s.style.top = (y + (Math.random()*6-3)) + 'vh';
        s.style.width = (size) + 'px';
        s.style.height = (size) + 'px';
        s.style.animationDuration = (2 + Math.random()*3) + 's';
        s.style.opacity = (0.3 + Math.random()*0.9);
        container.appendChild(s);
      }
    })();

    /* ---------- TYPING + ROTATE SEQUENCE ---------- */
    const fullText = "Anh y√™u b√© Qu·ª≥nh Anh m√£i y√™u em üíû";
    const secondText = "Anh y√™u b√© nh·∫•t üíñ";
    const typed = document.getElementById('typedTitle');

    function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

    async function playSequence(){
      // clear
      typed.innerHTML='';
      // typing first line
      let span = document.createElement('span');
      typed.appendChild(span);
      for(let i=0;i<fullText.length;i++){
        span.textContent += fullText[i];
        await sleep(80 + Math.random()*40);
      }
      // small pause
      await sleep(700);
      // rotate out effect
      span.classList.add('rotate-out');
      // prepare second line
      await sleep(650);
      typed.innerHTML = '';
      const s2 = document.createElement('span');
      s2.textContent = secondText;
      s2.classList.add('rotate-in');
      typed.appendChild(s2);
      // add small twinkle/glow to heart by scaling
      const heart = document.querySelector('.heart');
      heart.animate([{transform:'scale(1)'},{transform:'scale(1.08)'},{transform:'scale(1)'}], {duration:1200, easing:'ease-in-out'});
    }

    // initial play
    playSequence();

    // replay button
    document.getElementById('replayBtn').addEventListener('click', ()=>{
      playSequence();
      // try to play audio if allowed
      const a = document.getElementById('bgAudio');
      a.play().catch(()=>{/* ignore if blocked */});
    });

    // share tip
    document.getElementById('shareTip').addEventListener('click', ()=>{
      alert('C√°ch g·ª≠i: 1) D√°n to√†n b·ªô code v√†o CodePen (https://codepen.io/pen/) ‚Üí Save ‚Üí copy link g·ª≠i. \n\n2) Ho·∫∑c l∆∞u file .html r·ªìi upload l√™n Google Drive/OneDrive v√† chia s·∫ª link (c√°ch n√†y ng∆∞·ªùi nh·∫≠n m·ªü l√† th·∫•y ngay).');
    });

    /* ---------- AUDIO CONTROLS ---------- */
    const audio = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playBtn');
    const muteBtn = document.getElementById('muteBtn');

    playBtn.addEventListener('click', async ()=>{
      if(audio.paused){
        try { await audio.play(); playBtn.textContent='‚è∏'; }
        catch(e){ alert('Tr√¨nh duy·ªát ch·∫∑n ph√°t nh·∫°c t·ª± ƒë·ªông. H√£y b·∫•m Play l·∫ßn n·ªØa ho·∫∑c cho ph√©p √¢m thanh.'); }
      } else {
        audio.pause();
        playBtn.textContent='‚ñ∂';
      }
    });
    muteBtn.addEventListener('click', ()=>{
      audio.muted = !audio.muted;
      muteBtn.textContent = audio.muted ? 'üîá' : 'üîà';
    });

    // attempt autoplay once (may be blocked on mobile)
    audio.play().then(()=>{ playBtn.textContent='‚è∏' }).catch(()=>{ playBtn.textContent='‚ñ∂' });

    /* ---------- Accessibility: allow keyboard replay ---------- */
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'r' || e.key === 'R') playSequence();
    });

    /* ---------- Helpful hint: adjust audio URL ---------- */
    // If you want a different background track (non-copyright), replace the <source> src URL above with your mp3 link.
    // Example: upload your mp3 to Google Drive (set public) or use a free mp3 host, then paste the URL into the <source> element.

  </script>
</body>
</html>
